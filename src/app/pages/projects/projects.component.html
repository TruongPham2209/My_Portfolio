<div class="projects-container">
    <!-- Header Section -->
    <div class="container py-5">
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold text-primary mb-3"><i class="bi bi-code-slash me-3"></i>My Projects</h1>
            <p class="lead text-muted">Explore my latest work and technical achievements</p>
        </div>

        <!-- Featured Projects Section -->
        <div class="mb-5" *ngIf="highlightedProjects">
            <h2 class="h3 mb-4 text-center"><i class="bi bi-star-fill text-warning me-2"></i>Featured Projects</h2>
            <div class="row g-4">
                <div class="col-lg-6" *ngFor="let project of highlightedProjects" [hidden]="!project.featured">
                    <div class="card h-100 shadow-sm project-card featured-card">
                        <div class="position-relative">
                            <img
                                [src]="project.thumbnail"
                                [alt]="project.title"
                                class="card-img-top project-thumbnail"
                                style="height: 250px; object-fit: cover"
                            />
                            <span class="badge bg-warning position-absolute top-0 end-0 m-2">
                                <i class="bi bi-star-fill"></i> Featured
                            </span>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title fw-bold">{{ project.title }}</h5>
                            <p class="card-text text-muted mb-3">{{ project.description }}</p>

                            <!-- Technologies -->
                            <div class="mb-3">
                                <div class="d-flex flex-wrap gap-1">
                                    <span
                                        *ngFor="let tech of project.technologies.slice(0, 4)"
                                        class="badge bg-light text-dark border"
                                        [title]="tech.description"
                                    >
                                        <img
                                            src="{{ tech.svg }}"
                                            alt="{{ tech.name }}"
                                            class="me-2"
                                            style="width: 1em; height: 1em"
                                        />
                                        <span>{{ tech.name }}</span>
                                    </span>
                                    <span *ngIf="project.technologies.length > 4" class="badge bg-secondary">
                                        +{{ project.technologies.length - 4 }} more
                                    </span>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="mt-auto">
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <button
                                        *ngIf="project.backendGithubUrl"
                                        class="btn btn-outline-dark btn-sm"
                                        (click)="openExternalLink(project.backendGithubUrl!)"
                                    >
                                        <i class="bi bi-github me-1"></i>
                                        Backend GitHub
                                    </button>
                                    <button
                                        *ngIf="project.frontendGithubUrl"
                                        class="btn btn-outline-dark btn-sm"
                                        (click)="openExternalLink(project.frontendGithubUrl!)"
                                    >
                                        <i class="bi bi-github me-1"></i>
                                        Frontend GitHub
                                    </button>
                                    <button
                                        *ngIf="project.liveUrl"
                                        class="btn btn-outline-primary btn-sm"
                                        (click)="openExternalLink(project.liveUrl!)"
                                    >
                                        <i class="bi bi-link-45deg me-1"></i>
                                        Live Demo
                                    </button>
                                    <button
                                        *ngIf="project.youtubeUrl"
                                        class="btn btn-outline-danger btn-sm"
                                        (click)="openExternalLink(project.youtubeUrl!)"
                                    >
                                        <i class="bi bi-play-circle me-1"></i>
                                        Video
                                    </button>
                                </div>
                                <button class="btn btn-primary w-100" (click)="showProjectDetail(project)">
                                    <i class="bi bi-eye me-2"></i>
                                    View Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- All Projects Section -->
        <div>
            <h2 class="h3 mb-4 text-center">
                <i class="bi bi-collection me-2"></i>All Projects
                <span class="badge bg-primary ms-2">{{ filteredProjects.length }}</span>
            </h2>

            <!-- Filter Section -->
            <div class="row justify-content-center mb-5">
                <div class="col-lg-8">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title mb-3"><i class="bi bi-funnel me-2"></i>Filter by Technology</h5>
                            <div class="d-flex flex-wrap gap-2">
                                <button
                                    class="btn btn-sm"
                                    [class.btn-primary]="selectedTechnology === 'all'"
                                    [class.btn-outline-primary]="selectedTechnology !== 'all'"
                                    (click)="filterByTechnology('all')"
                                >
                                    All Projects
                                </button>
                                <button
                                    *ngFor="let tech of availableTechnologies"
                                    class="btn btn-sm"
                                    [class.btn-primary]="selectedTechnology === tech"
                                    [class.btn-outline-primary]="selectedTechnology !== tech"
                                    (click)="filterByTechnology(tech)"
                                >
                                    {{ tech }}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- No Projects Message -->
            <div *ngIf="filteredProjects.length === 0" class="text-center py-5">
                <div class="card">
                    <div class="card-body">
                        <i class="bi bi-search display-1 text-muted mb-3"></i>
                        <h4>No projects found</h4>
                        <p class="text-muted">Try adjusting your filter criteria</p>
                        <button class="btn btn-primary" (click)="filterByTechnology('all')">Show All Projects</button>
                    </div>
                </div>
            </div>

            <!-- Projects Grid -->
            <div class="row g-4" *ngIf="filteredProjects.length > 0">
                <div class="col-lg-4 col-md-6" *ngFor="let project of filteredProjects">
                    <div class="card h-100 shadow-sm project-card">
                        <div class="position-relative">
                            <img
                                [src]="project.thumbnail"
                                [alt]="project.title"
                                class="card-img-top project-thumbnail"
                                style="height: 200px; object-fit: cover"
                            />
                            <span *ngIf="project.featured" class="badge bg-warning position-absolute top-0 end-0 m-2">
                                <i class="bi bi-star-fill"></i>
                            </span>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">{{ project.title }}</h5>
                            <p class="card-text text-muted small mb-3">{{ project.description }}</p>

                            <!-- Technologies (compact view) -->
                            <div class="mb-3">
                                <div class="d-flex flex-wrap gap-1">
                                    <span
                                        *ngFor="let tech of project.technologies.slice(0, 3)"
                                        class="badge bg-light text-dark border small"
                                    >
                                        {{ tech.name }}
                                    </span>
                                    <span *ngIf="project.technologies.length > 3" class="badge bg-secondary small">
                                        +{{ project.technologies.length - 3 }}
                                    </span>
                                </div>
                            </div>

                            <!-- Quick Action Buttons -->
                            <div class="mt-auto">
                                <div class="d-flex gap-1 mb-2">
                                    <button
                                        *ngIf="project.backendGithubUrl"
                                        class="btn btn-outline-secondary btn-sm flex-fill"
                                        (click)="openExternalLink(project.backendGithubUrl!)"
                                        title="View on GitHub (BE)"
                                    >
                                        <i class="bi bi-github"></i>
                                    </button>

                                    <button
                                        *ngIf="project.frontendGithubUrl"
                                        class="btn btn-outline-secondary btn-sm flex-fill"
                                        (click)="openExternalLink(project.frontendGithubUrl!)"
                                        title="View on GitHub (FE)"
                                    >
                                        <i class="bi bi-github"></i>
                                    </button>

                                    <button
                                        *ngIf="project.liveUrl"
                                        class="btn btn-outline-primary btn-sm flex-fill"
                                        (click)="openExternalLink(project.liveUrl!)"
                                        title="Live Demo"
                                    >
                                        <i class="bi bi-link-45deg"></i>
                                    </button>
                                    <button
                                        *ngIf="project.youtubeUrl"
                                        class="btn btn-outline-danger btn-sm flex-fill"
                                        (click)="openExternalLink(project.youtubeUrl!)"
                                        title="Watch Video"
                                    >
                                        <i class="bi bi-play-circle"></i>
                                    </button>
                                </div>
                                <button class="btn btn-primary btn-sm w-100" (click)="showProjectDetail(project)">
                                    <i class="bi bi-info-circle me-1"></i>
                                    Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Project Detail Modal Component -->
    <app-project-detail (closed)="onProjectDetailClosed()"></app-project-detail>
</div>
